/*
 * lcdmanager.c
 *
 *  Created on: Jun 9, 2023
 *      Author: xuanthodo
 */

#include "main.h"
#include "DeviceManager/lcdmanager.h"
#include "Lib/scheduler/scheduler.h"
#include "Lib/utils/utils_logger.h"
#include "Hal/rtc.h"


#define LCDMNG_WIDTH				128
#define LCDMNG_HEIGHT				64
#define SCREEN_SIZE					128 * 64 / 8
#define INIT_SCREEN_DURATION		3000	// 3s
#define WELCOME_SCREEN_DURATION		3000 	// 3s
#define WORKING_SCREEN_DURATION		60000 	// 10s
#define PROCESSING_SCREEN_DURATION	2000 	// 10s
#define IDLE_SCREEN_DURATION		5000 	// 10s

#define WORKING_SCREEN_DATE_X_POSITION				67
#define WORKING_SCREEN_DATE_LINE_POSITION			0
#define WORKING_SCREEN_TIME_X_POSITION				24
#define WORKING_SCREEN_TIME_LINE_POSITION			2
#define WORKING_SCREEN_AMOUNT_X_POSITION 			72
#define WORKING_SCREEN_AMOUNT_LINE_POSITION			6

#define SETTING_SCREEN_FIELD_DATA_X_POSITION				6
#define SETTING_SCREEN_FIELD_DATA_LINE_POSITION				6
#define SETTING_SCREEN_DATA_X_POSITION						6
#define SETTING_SCREEN_DATA_LINE_POSITION					3


enum {
	LCDMNG_STATE_INIT,
	LCDMNG_STATE_WAIT_FOR_INIT,
	LCDMNG_STATE_WELCOME,
	LCDMNG_STATE_WAIT_FOR_WELCOME,
	LCDMNG_STATE_WORKING,
	LCDMNG_STATE_PROCESSING,
	LCDMNG_STATE_WAIT_FOR_PROCESSING,
	LCDMNG_STATE_SETTING,
	LCDMNG_STATE_SETTING_DATA,
	LCDMNG_STATE_IDLE
};

typedef struct {
	char * name;
	size_t x_position;
	size_t line_position;
}LCDMNG_setting_field_t;


static void LCDMNG_state_init();
static void LCDMNG_state_wait_for_init();
static void LCDMNG_state_welcome();
static void LCDMNG_state_wait_for_welcome();
static void LCDMNG_state_working();
static void LCDMNG_state_processing();
static void LCDMNG_state_wait_for_processing();
static void LCDMNG_state_setting();
static void LCDMNG_state_setting_data();
static void LCDMNG_state_idle();
static void LCDMNG_timeout();
static void LCDMNG_timeout_for_idle();
static void LCDMNG_printf();
static void LCDMNG_draw_string(uint8_t *buff, uint8_t x, uint8_t line, uint8_t *c);
static void LCDMNG_set_font(uint8_t *fontPtr);
static void LCDMNG_draw_char(uint8_t *buff, uint8_t x, uint8_t line, uint8_t c);


static uint8_t logo_screen[1024] = {  0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80,
		0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0xE0, 0xF8, 0xFC, 0xFE, 0xFE, 0xFF, 0xFF, 0x3F, 0x3F, 0x7F,
		0x1E, 0x1E, 0x1C, 0x08, 0x00, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xE0, 0xF0,
		0xF8, 0xFC, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFC, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x09, 0x20, 0x53, 0x23,
		0xC7, 0x87, 0x0F, 0x0F, 0x04, 0x00, 0x80, 0x80, 0x40, 0x00, 0x10, 0x07,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xF0, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0x7F, 0x3F, 0x0F, 0x07, 0x03, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x80, 0xF0, 0xFC, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x3F, 0x1F, 0x0F,
		0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xC0, 0xF0, 0xF0, 0xFC, 0xFC, 0xFE,
		0xFE, 0x7E, 0xFE, 0xFE, 0xFC, 0xF8, 0xF0, 0xC0, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xF0,
		0xFE, 0xFF, 0xFF, 0xFF, 0x7F, 0x1F, 0x07, 0x03, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80,
		0xC0, 0xF0, 0xF8, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x1F, 0x07, 0x03,
		0x00, 0x00, 0x00, 0x07, 0x7F, 0xFF, 0xFF, 0xFF, 0xFC, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0xF8, 0xFF, 0xFF, 0xFF,
		0xFF, 0x1F, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xC0, 0xF0, 0xF8, 0xFE, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0x7F, 0x1F, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0xC0, 0xF0, 0xFC, 0xFF, 0x7F, 0x1F, 0x0F, 0x07, 0x01,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0xFF, 0xFF, 0xFF, 0xFF,
		0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFE, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x7F,
		0x3F, 0x0F, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x60,
		0x30, 0x1C, 0x0F, 0x07, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x07, 0x0F, 0x1F,
		0x1F, 0x3F, 0x3F, 0x3F, 0x3F, 0x3F, 0x1F, 0x0F, 0x07, 0x03, 0x01, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x01, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };

static uint8_t welcome_screen[1024] = {  0xFF, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0xC1, 0x41, 0x21, 0x21,
		0x21, 0x21, 0x41, 0x01, 0xF1, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0x11, 0x21, 0x41, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x11, 0x31, 0x41, 0x01, 0x01, 0x01, 0x81, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01,
		0x01, 0x01, 0xFF,

		0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x1F, 0x60, 0x40, 0x80, 0x80, 0x80, 0x80, 0x40, 0x00, 0xFF, 0x02, 0x01,
		0x01, 0x01, 0x02, 0xFC, 0x00, 0x00, 0x72, 0x89, 0x89, 0x89, 0x49, 0xFE,
		0x00, 0x00, 0x3C, 0x42, 0x81, 0x81, 0x81, 0x42, 0x3C, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0xFF, 0x02, 0x01, 0x01, 0x01, 0xFE, 0x02, 0x01, 0x01,
		0x01, 0xFE, 0x00, 0x00, 0x00, 0x7F, 0x80, 0x80, 0x80, 0x40, 0xFF, 0x04,
		0x03, 0x00, 0x00, 0xFF, 0x02, 0x01, 0x01, 0x01, 0x02, 0xFC, 0x00, 0x00,
		0xAE, 0x51, 0x51, 0x51, 0x51, 0x4F, 0x81, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

		0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x03, 0x04, 0x04, 0x04, 0x04, 0x04, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

		0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x80, 0x40, 0x20, 0x20, 0x20, 0x40, 0xE0, 0x00, 0x00, 0xE0,
		0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x60, 0x80, 0x00, 0x08, 0x04,
		0x82, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x00, 0x80, 0x40,
		0x20, 0x00, 0x00, 0x00, 0xFE, 0x40, 0x20, 0x20, 0x20, 0x40, 0x80, 0x00,
		0x00, 0x40, 0x20, 0x28, 0x24, 0x22, 0xC0, 0x00, 0x00, 0x80, 0x40, 0x20,
		0x20, 0x20, 0x40, 0x00, 0xFE, 0x40, 0x20, 0x20, 0x20, 0x40, 0x80, 0x00,
		0x00, 0x00, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

		0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x07, 0x08, 0x10, 0x10, 0x10, 0x08, 0xFF, 0x00, 0x00, 0x07,
		0x08, 0x10, 0x10, 0x10, 0x08, 0x1F, 0x00, 0x00, 0x01, 0xC6, 0x38, 0x06,
		0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x01, 0x02, 0x04,
		0x08, 0x10, 0x00, 0x00, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x00,
		0x00, 0x0E, 0x11, 0x11, 0x11, 0x09, 0x1F, 0x00, 0x00, 0x07, 0x08, 0x10,
		0x10, 0x10, 0x08, 0x00, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x00,
		0x00, 0x00, 0x1B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

		0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

		0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x80, 0x60, 0x80, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x60, 0x80, 0x00,
		0x00, 0x00, 0x80, 0x60, 0x00, 0xE0, 0x20, 0x20, 0x20, 0x00, 0x00, 0xE0,
		0x60, 0x80, 0x00, 0x00, 0xE0, 0x00, 0x00, 0xE0, 0x20, 0x20, 0x20, 0x40,
		0x80, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x00, 0xE0, 0x60, 0x80, 0x00, 0x00,
		0xE0, 0x00, 0x00, 0x80, 0x40, 0x20, 0x20, 0x20, 0x40, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x80, 0x40, 0x20, 0x20, 0x20, 0x40, 0x00, 0x80, 0x40, 0x20,
		0x20, 0x20, 0x40, 0x80, 0x00, 0x00, 0xE0, 0x60, 0x80, 0x00, 0x00, 0x00,
		0x80, 0x60, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x60, 0x80, 0x00, 0x00, 0x00,
		0x80, 0x60, 0x00, 0xE0, 0x60, 0x80, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,

		0xFF, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x98, 0x86,
		0x85, 0x84, 0x85, 0x86, 0x98, 0x80, 0x9F, 0x80, 0x80, 0x80, 0x81, 0x86,
		0x98, 0x86, 0x81, 0x80, 0x80, 0x9F, 0x91, 0x91, 0x91, 0x80, 0x80, 0x9F,
		0x80, 0x81, 0x86, 0x98, 0x9F, 0x80, 0x80, 0x9F, 0x90, 0x90, 0x90, 0x88,
		0x87, 0x80, 0x80, 0x9F, 0x80, 0x80, 0x80, 0x9F, 0x80, 0x81, 0x86, 0x98,
		0x9F, 0x80, 0x80, 0x87, 0x88, 0x90, 0x92, 0x92, 0x8E, 0x80, 0x80, 0x90,
		0x80, 0x80, 0x87, 0x88, 0x90, 0x90, 0x90, 0x88, 0x80, 0x87, 0x88, 0x90,
		0x90, 0x90, 0x88, 0x87, 0x80, 0x80, 0x9F, 0x80, 0x81, 0x86, 0x98, 0x86,
		0x81, 0x80, 0x9F, 0x80, 0x80, 0x90, 0x80, 0x80, 0x81, 0x86, 0x98, 0x86,
		0x81, 0x80, 0x80, 0x9F, 0x80, 0x81, 0x86, 0x98, 0x9F, 0x80, 0x80, 0x80,
		0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0xFF };

static const uint8_t working_screen[1024] = { 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00,

		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,
		0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x80, 0xF8, 0xF8, 0x98, 0x98, 0x18, 0x18, 0x30, 0xF0, 0xC0, 0x00, 0x00,
		0x98, 0xCC, 0xCC, 0xD8, 0xD8, 0x8C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0xC0, 0xC0, 0x80, 0xC0, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0xFC, 0xFC, 0x80,
		0xC0, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0xC0, 0xD0, 0xDC, 0xDC, 0xDC, 0xD0,
		0x80, 0x00, 0xC0, 0xC0, 0x80, 0xC0, 0xC0, 0xC0, 0x80, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		0x01, 0x3F, 0x3F, 0x31, 0x31, 0x30, 0x30, 0x18, 0x1F, 0x07, 0x00, 0x00,
		0x1D, 0x3E, 0x32, 0x12, 0x3F, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x3F, 0x3F, 0x01, 0x00, 0x00, 0x3F, 0x3F, 0x00, 0x00, 0x3F, 0x3F, 0x01,
		0x00, 0x00, 0x3F, 0x3F, 0x00, 0x00, 0x1C, 0x3E, 0xB6, 0xB6, 0x36, 0x3F,
		0x3F, 0x00, 0x3F, 0x3F, 0x01, 0x00, 0x00, 0x3F, 0x3F, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 };

static uint8_t working_screen_temp[1024];



static const uint8_t processing_screen[] = {
		0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00,

				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xF8,
				0x08, 0x08, 0x08, 0x08, 0x08, 0x10, 0x30, 0xC0, 0x00, 0x00, 0x80, 0x40,
				0x40, 0x40, 0x40, 0x40, 0x80, 0x00, 0x00, 0xC0, 0x80, 0x40, 0x40, 0x40,
				0xC0, 0x80, 0x00, 0x80, 0x40, 0x40, 0x40, 0x40, 0xC0, 0x40, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x40, 0xF0, 0x40, 0x40, 0x40, 0x00, 0xFC, 0x80,
				0x40, 0x40, 0x40, 0xC0, 0x80, 0x00, 0x00, 0xC0, 0x00, 0x00, 0x00, 0x00,
				0x00, 0xC0, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x80, 0x40, 0x40, 0x40, 0x80,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFC, 0x80, 0x40, 0x40, 0x40, 0xC0,
				0x80, 0x00, 0x00, 0xD0, 0x00, 0x00, 0x00, 0x00, 0x90, 0x48, 0x44, 0x48,
				0xD0, 0x80, 0x00, 0x00, 0xC0, 0x80, 0x40, 0x40, 0x40, 0xC0, 0x80, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x3F,
				0x21, 0x21, 0x21, 0x20, 0x20, 0x10, 0x18, 0x07, 0x00, 0x00, 0x1C, 0x24,
				0x22, 0x22, 0x22, 0x12, 0x3F, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x3F, 0x00, 0xDF, 0x34, 0x14, 0x14, 0x14, 0x93, 0xE0, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x00, 0x3F, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x1F, 0x30, 0x20, 0xA0, 0x20,
				0x10, 0x3F, 0x01, 0x01, 0x00, 0x00, 0x0F, 0x30, 0x20, 0x20, 0x20, 0x10,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x3F, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x0F, 0x12, 0x22, 0x22, 0xA2,
				0x22, 0x13, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x10, 0x10,
				0x10, 0x10, 0xF0, 0x10, 0x00, 0x00, 0xF4, 0x00, 0x00, 0x00, 0x20, 0x10,
				0x90, 0x90, 0x90, 0x90, 0xE0, 0x00, 0x00, 0xC0, 0x20, 0x10, 0x10, 0x10,
				0x10, 0x20, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0x20, 0x10,
				0x10, 0x10, 0x20, 0xFF, 0x00, 0x00, 0xF4, 0x00, 0x00, 0x00, 0xC0, 0x20,
				0x10, 0x10, 0x10, 0x20, 0x00, 0x00, 0xFF, 0x20, 0x10, 0x10, 0x10, 0x30,
				0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x37, 0x4D, 0x45,
				0x45, 0x45, 0x64, 0x38, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x07, 0x09,
				0x08, 0x08, 0x08, 0x04, 0x0F, 0x00, 0x00, 0x03, 0x04, 0x08, 0x08, 0x08,
				0x08, 0x04, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x0C, 0x08,
				0x08, 0x08, 0x04, 0x0F, 0x00, 0x00, 0x4F, 0x00, 0x00, 0x00, 0x03, 0x0C,
				0x08, 0x08, 0x08, 0x04, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};


static uint8_t setting_screen[1024];
static uint8_t setting_data_screen[1024];


static const uint8_t font5x7[] = {
		0x0, 0x0, // size of zero indicates fixed width font, actual length is width * height
		0x05, // width
		0x07, // height
		0x20, // first char
		0x60, // char count
		// Fixed width; char width table not used !!!!

		// font data
		// font data
		0x00, 0x00, 0x00, 0x00, 0x00,// (space)
		0x00, 0x00, 0x5F, 0x00, 0x00,// !
		0x00, 0x07, 0x00, 0x07, 0x00,// "
		0x14, 0x7F, 0x14, 0x7F, 0x14,// #
		0x24, 0x2A, 0x7F, 0x2A, 0x12,// $
		0x23, 0x13, 0x08, 0x64, 0x62,// %
		0x36, 0x49, 0x55, 0x22, 0x50,// &
		0x00, 0x05, 0x03, 0x00, 0x00,// '
		0x00, 0x1C, 0x22, 0x41, 0x00,// (
		0x00, 0x41, 0x22, 0x1C, 0x00,// )
		0x08, 0x2A, 0x1C, 0x2A, 0x08,// *
		0x08, 0x08, 0x3E, 0x08, 0x08,// +
		0x00, 0x50, 0x30, 0x00, 0x00,// ,
		0x08, 0x08, 0x08, 0x08, 0x08,// -
		0x00, 0x60, 0x60, 0x00, 0x00,// .
		0x20, 0x10, 0x08, 0x04, 0x02,// /
		0x3E, 0x51, 0x49, 0x45, 0x3E,// 0
		0x00, 0x42, 0x7F, 0x40, 0x00,// 1
		0x42, 0x61, 0x51, 0x49, 0x46,// 2
		0x21, 0x41, 0x45, 0x4B, 0x31,// 3
		0x18, 0x14, 0x12, 0x7F, 0x10,// 4
		0x27, 0x45, 0x45, 0x45, 0x39,// 5
		0x3C, 0x4A, 0x49, 0x49, 0x30,// 6
		0x01, 0x71, 0x09, 0x05, 0x03,// 7
		0x36, 0x49, 0x49, 0x49, 0x36,// 8
		0x06, 0x49, 0x49, 0x29, 0x1E,// 9
		0x00, 0x36, 0x36, 0x00, 0x00,// :
		0x00, 0x56, 0x36, 0x00, 0x00,// ;
		0x00, 0x08, 0x14, 0x22, 0x41,// <
		0x14, 0x14, 0x14, 0x14, 0x14,// =
		0x41, 0x22, 0x14, 0x08, 0x00,// >
		0x02, 0x01, 0x51, 0x09, 0x06,// ?
		0x32, 0x49, 0x79, 0x41, 0x3E,// @
		0x7E, 0x11, 0x11, 0x11, 0x7E,// A
		0x7F, 0x49, 0x49, 0x49, 0x36,// B
		0x3E, 0x41, 0x41, 0x41, 0x22,// C
		0x7F, 0x41, 0x41, 0x22, 0x1C,// D
		0x7F, 0x49, 0x49, 0x49, 0x41,// E
		0x7F, 0x09, 0x09, 0x01, 0x01,// F
		0x3E, 0x41, 0x41, 0x51, 0x32,// G
		0x7F, 0x08, 0x08, 0x08, 0x7F,// H
		0x00, 0x41, 0x7F, 0x41, 0x00,// I
		0x20, 0x40, 0x41, 0x3F, 0x01,// J
		0x7F, 0x08, 0x14, 0x22, 0x41,// K
		0x7F, 0x40, 0x40, 0x40, 0x40,// L
		0x7F, 0x02, 0x04, 0x02, 0x7F,// M
		0x7F, 0x04, 0x08, 0x10, 0x7F,// N
		0x3E, 0x41, 0x41, 0x41, 0x3E,// O
		0x7F, 0x09, 0x09, 0x09, 0x06,// P
		0x3E, 0x41, 0x51, 0x21, 0x5E,// Q
		0x7F, 0x09, 0x19, 0x29, 0x46,// R
		0x46, 0x49, 0x49, 0x49, 0x31,// S
		0x01, 0x01, 0x7F, 0x01, 0x01,// T
		0x3F, 0x40, 0x40, 0x40, 0x3F,// U
		0x1F, 0x20, 0x40, 0x20, 0x1F,// V
		0x7F, 0x20, 0x18, 0x20, 0x7F,// W
		0x63, 0x14, 0x08, 0x14, 0x63,// X
		0x03, 0x04, 0x78, 0x04, 0x03,// Y
		0x61, 0x51, 0x49, 0x45, 0x43,// Z
		0x00, 0x00, 0x7F, 0x41, 0x41,// [
		0x02, 0x04, 0x08, 0x10, 0x20,// "\"
		0x41, 0x41, 0x7F, 0x00, 0x00,// ]
		0x04, 0x02, 0x01, 0x02, 0x04,// ^
		0x40, 0x40, 0x40, 0x40, 0x40,// _
		0x00, 0x01, 0x02, 0x04, 0x00,// `
		0x20, 0x54, 0x54, 0x54, 0x78,// a
		0x7F, 0x48, 0x44, 0x44, 0x38,// b
		0x38, 0x44, 0x44, 0x44, 0x20,// c
		0x38, 0x44, 0x44, 0x48, 0x7F,// d
		0x38, 0x54, 0x54, 0x54, 0x18,// e
		0x08, 0x7E, 0x09, 0x01, 0x02,// f
		0x08, 0x14, 0x54, 0x54, 0x3C,// g
		0x7F, 0x08, 0x04, 0x04, 0x78,// h
		0x00, 0x44, 0x7D, 0x40, 0x00,// i
		0x20, 0x40, 0x44, 0x3D, 0x00,// j
		0x00, 0x7F, 0x10, 0x28, 0x44,// k
		0x00, 0x41, 0x7F, 0x40, 0x00,// l
		0x7C, 0x04, 0x18, 0x04, 0x78,// m
		0x7C, 0x08, 0x04, 0x04, 0x78,// n
		0x38, 0x44, 0x44, 0x44, 0x38,// o
		0x7C, 0x14, 0x14, 0x14, 0x08,// p
		0x08, 0x14, 0x14, 0x18, 0x7C,// q
		0x7C, 0x08, 0x04, 0x04, 0x08,// r
		0x48, 0x54, 0x54, 0x54, 0x20,// s
		0x04, 0x3F, 0x44, 0x40, 0x20,// t
		0x3C, 0x40, 0x40, 0x20, 0x7C,// u
		0x1C, 0x20, 0x40, 0x20, 0x1C,// v
		0x3C, 0x40, 0x30, 0x40, 0x3C,// w
		0x44, 0x28, 0x10, 0x28, 0x44,// x
		0x0C, 0x50, 0x50, 0x50, 0x3C,// y
		0x44, 0x64, 0x54, 0x4C, 0x44,// z
		0x00, 0x08, 0x36, 0x41, 0x00,// {
		0x00, 0x00, 0x7F, 0x00, 0x00,// |
		0x00, 0x41, 0x36, 0x08, 0x00,// }
		0x08, 0x08, 0x2A, 0x1C, 0x08,// ->
		0x08, 0x1C, 0x2A, 0x08, 0x08 // <-
};

static const uint8_t font7x15[] = {
		0x0,
		0x0,	// size of zero indicates fixed width font
		7,		// width
		15,		// height
		'+',	// first char (48)
		16,		// char count
		// char '+'
		0x00, 0x80, 0x80, 0xe0, 0xe0, 0x80, 0x80,
		0x00, 0x00, 0x00, 0x03, 0x03, 0x00, 0x00,

		// char ','
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x58, 0x38, 0x00, 0x00,

		// char '-'
		0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		// char '.'
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00,

		// char '/'
		0x00, 0x00, 0x00, 0xc0, 0xf0, 0x3c, 0x0f,
		0x00, 0x3c, 0x0f, 0x03, 0x00, 0x00, 0x00,

		// char '0'
		0xfc, 0xfe, 0x03, 0xe1, 0x1b, 0xfe, 0xfc,
		0x0f, 0x1f, 0x36, 0x21, 0x30, 0x1f, 0x0f,

		// char '1'
		0x04, 0x04, 0x06, 0xff, 0xff, 0x00, 0x00,
		0x20, 0x20, 0x20, 0x3f, 0x3f, 0x20, 0x20,

		// char '2'
		0x0c, 0x0e, 0x03, 0x01, 0x81, 0xfe, 0x7c,
		0x38, 0x3c, 0x26, 0x23, 0x21, 0x20, 0x20,

		// char '3'
		0x0c, 0x0e, 0x43, 0x41, 0x43, 0xfe, 0xbc,
		0x0c, 0x1c, 0x30, 0x20, 0x30, 0x1f, 0x0f,

		// char '4'
		0x00, 0xe0, 0xfc, 0x1f, 0x83, 0x80, 0x00,
		0x0f, 0x0f, 0x08, 0x08, 0x3f, 0x3f, 0x08,

		// char '5'
		0x3f, 0x3f, 0x21, 0x21, 0x61, 0xe1, 0x81,
		0x0c, 0x1c, 0x30, 0x20, 0x30, 0x3f, 0x0f,

		// char '6'
		0xe0, 0xf8, 0x5c, 0x46, 0xc3, 0xc1, 0x01,
		0x0f, 0x1f, 0x30, 0x20, 0x30, 0x3f, 0x0f,

		// char '7'
		0x01, 0x01, 0x01, 0x81, 0xf1, 0x7f, 0x0f,
		0x00, 0x00, 0x3c, 0x3f, 0x03, 0x00, 0x00,

		// char '8'
		0x1c, 0xbe, 0xe3, 0x41, 0xe3, 0xbe, 0x1c,
		0x0f, 0x1f, 0x30, 0x20, 0x30, 0x1f, 0x0f,

		// char '9'
		0x3c, 0x7e, 0xc3, 0x81, 0x81, 0xfe, 0xfc,
		0x20, 0x30, 0x38, 0x0c, 0x07, 0x03, 0x00,

		// char ':'
		0x00, 0x00, 0x00, 0x60, 0x60, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00,

};

static const uint8_t font15x31[] = {
		0x0,
				0x0,	// size of zero indicates fixed width font
				15,		// width
				31,		// height
				'+',	// first char (48)
				16,		// char count
		// char '+'
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xfc, 0xfc, 0xfc,
				0xfc, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x0f, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		// char ','
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0xcf, 0xcf, 0x3f, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00,

		// char '-'
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
				0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		// char '.'
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00,

		// char '/'
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xf0,
				0xff, 0xff, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xf0, 0xff,
				0xff, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xf0, 0xff, 0xff,
				0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x0f,
				0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		// char '0'
				0xf0, 0xf0, 0xfc, 0xfc, 0x0f, 0x0f, 0x03, 0x03, 0x03, 0xcf, 0xcf, 0xfc,
				0xfc, 0xf0, 0xf0, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0xc0, 0xc0, 0x3c,
				0x3f, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x3c, 0x3c,
				0x03, 0x03, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x03,
				0x03, 0x0f, 0x0f, 0x0c, 0x0c, 0x0c, 0x0f, 0x0f, 0x03, 0x03, 0x00, 0x00,

		// char '1'
				0x30, 0x30, 0x30, 0x30, 0x3c, 0x3c, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff,
				0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x0c, 0x0c,
				0x0c, 0x0c, 0x0c, 0x0f, 0x0f, 0x0f, 0x0f, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c,

		// char '2'
				0xf0, 0xf0, 0xfc, 0xfc, 0x0f, 0x0f, 0x03, 0x03, 0x03, 0x03, 0x0f, 0xff,
				0xfc, 0xfc, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0,
				0xc0, 0xf0, 0xff, 0x3f, 0x3f, 0x0f, 0xc0, 0xc0, 0xf0, 0xf0, 0x3c, 0x3c,
				0x0f, 0x0f, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x0f,
				0x0f, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c,

		// char '3'
				0xf0, 0xf0, 0xfc, 0xfc, 0x0f, 0x0f, 0x03, 0x03, 0x03, 0x03, 0x0f, 0x1f,
				0xfc, 0xfc, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x30, 0x30, 0x30,
				0x30, 0x30, 0x30, 0xff, 0xdf, 0x8f, 0xf0, 0xf0, 0xf0, 0xf0, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xff, 0xff, 0xff, 0x00, 0x00, 0x03,
				0x03, 0x0f, 0x0f, 0x0c, 0x0c, 0x0c, 0x0c, 0x0f, 0x0f, 0x03, 0x03, 0x00,

		// char '4'
				0x00, 0x00, 0x00, 0x00, 0xf0, 0xf0, 0xff, 0xff, 0x0f, 0x0f, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0xfc, 0xff, 0xff, 0x03, 0x03, 0xc0,
				0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xc0, 0xc0,
				0xc0, 0xc0, 0xff, 0xff, 0xff, 0xff, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00,

		// char '5'
				0xff, 0xff, 0xff, 0xff, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03,
				0x03, 0x03, 0x03, 0x0f, 0x0f, 0x0f, 0x0f, 0x0c, 0x0c, 0x0c, 0x0c, 0x0c,
				0x0c, 0x3c, 0xfc, 0xf0, 0xf0, 0xc0, 0xf0, 0xf0, 0xf0, 0xf0, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x03,
				0x03, 0x0f, 0x0f, 0x0c, 0x0c, 0x0c, 0x0c, 0x0f, 0x0f, 0x03, 0x03, 0x00,

		// char '6'
				0x00, 0x00, 0xc0, 0xc0, 0xf0, 0xf0, 0x3c, 0x3c, 0x0f, 0x0f, 0x03, 0x03,
				0x03, 0x03, 0x03, 0xfc, 0xfc, 0xff, 0xff, 0x33, 0x33, 0x30, 0x30, 0x30,
				0x30, 0xf0, 0xf0, 0xc0, 0xc0, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x03,
				0x03, 0x0f, 0x0f, 0x0c, 0x0c, 0x0c, 0x0c, 0x0f, 0x0f, 0x03, 0x03, 0x00,

		// char '7'
				0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0xff,
				0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc0,
				0xff, 0xff, 0x3f, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0,
				0xf0, 0xff, 0xff, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,

		// char '8'
				0xf0, 0xf0, 0xfc, 0xfc, 0x0f, 0x0f, 0x03, 0x03, 0x03, 0x0f, 0x0f, 0xfc,
				0xfc, 0xf0, 0xf0, 0x03, 0x03, 0xcf, 0xcf, 0xfc, 0xfc, 0x30, 0x30, 0x30,
				0xfc, 0xfc, 0xcf, 0xcf, 0x03, 0x03, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x03,
				0x03, 0x0f, 0x0f, 0x0c, 0x0c, 0x0c, 0x0f, 0x0f, 0x03, 0x03, 0x00, 0x00,

		// char '9'
				0xe0, 0xf0, 0xfc, 0xfc, 0x0f, 0x0f, 0x03, 0x03, 0x03, 0x0f, 0x0f, 0xfc,
				0xfc, 0xf0, 0xe0, 0x07, 0x0f, 0x3f, 0x3f, 0xf0, 0xf0, 0xc0, 0xc0, 0xc0,
				0xc0, 0xc0, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0xc0, 0xc0, 0xfc, 0xfc, 0x3f, 0x3f, 0x03, 0x0c, 0x0c, 0x0c,
				0x0c, 0x0c, 0x0c, 0x0f, 0x0f, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00,

		// char ':'
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x3c, 0x3c,
				0x3c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
				0x00, 0x00, 0x00, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00,

};


static uint8_t * font;

static uint8_t prev_state = LCDMNG_STATE_INIT;
static uint8_t state = LCDMNG_STATE_INIT;
static const char* lcdmng_state_name[] = {
		[LCDMNG_STATE_INIT] = "LCDMNG_STATE_INIT\r\n",
		[LCDMNG_STATE_WAIT_FOR_INIT] = "LCDMNG_STATE_WAIT_FOR_INIT\r\n",
		[LCDMNG_STATE_WELCOME] = "LCDMNG_STATE_WELCOME\r\n",
		[LCDMNG_STATE_WAIT_FOR_WELCOME] = "LCDMNG_STATE_WAIT_FOR_WELCOME\r\n",
		[LCDMNG_STATE_WORKING] = "LCDMNG_STATE_WORKING\r\n",
		[LCDMNG_STATE_PROCESSING] = "LCDMNG_STATE_PROCESSING\r\n",
		[LCDMNG_STATE_WAIT_FOR_PROCESSING] = "LCDMNG_STATE_WAIT_FOR_PROCESSING\r\n",
		[LCDMNG_STATE_SETTING] = "LCDMNG_STATE_SETTING\r\n",
		[LCDMNG_STATE_SETTING_DATA] = "LCDMNG_STATE_SETTING_DATA\r\n",
		[LCDMNG_STATE_IDLE] = "LCDMNG_STATE_IDLE\r\n"
};

static LCDMNG_setting_field_t setting_field_info[] = {
		[LCDMNG_SETTING_FIELD_DATE_TIME] = {
			.name = "Gio",
			.x_position = 2,
			.line_position = 0
		},
		[LCDMNG_SETTING_FIELD_CARD_PRICE] = {
			.name = "Gia",
			.x_position = 2,
			.line_position = 1
		},
		[LCDMNG_SETTING_FIELD_PASSWORD] = {
			.name = "Password",
			.x_position = 2,
			.line_position = 2
		},
		[LCDMNG_SETTING_FIELD_TOTAL_CARD] = {
			.name = "Tong the",
			.x_position = 2,
			.line_position = 3
		},
		[LCDMNG_SETTING_FIELD_DELETE_TOTAL_CARD] = {
			.name = "Xoa the",
			.x_position = 2,
			.line_position = 4
		},
		[LCDMNG_SETTING_FIELD_SUM_OF_AMOUNT] = {
			.name = "Tong tien",
			.x_position = 2,
			.line_position = 5
		},
		[LCDMNG_SETTING_FIELD_DELETE_SUM_OF_AMOUNT] = {
			.name = "Xoa tien",
			.x_position = 2,
			.line_position = 6
		}
};
static bool timeout = false;
static bool timeout_for_idle = false;
static uint8_t setting_field_data = 0;

void LCDMNG_init(){
	// Do nothing
	memset(setting_screen, 0 ,sizeof(setting_screen));
	memset(setting_data_screen, 0 , sizeof(setting_data_screen));
	memcpy(working_screen_temp, working_screen, sizeof(working_screen));
}

void LCDMNG_run(){
	switch (state) {
		case LCDMNG_STATE_INIT:
			LCDMNG_state_init();
			break;
		case LCDMNG_STATE_WAIT_FOR_INIT:
			LCDMNG_state_wait_for_init();
			break;
		case LCDMNG_STATE_WELCOME:
			LCDMNG_state_welcome();
			break;
		case LCDMNG_STATE_WAIT_FOR_WELCOME:
			LCDMNG_state_wait_for_welcome();
			break;
		case LCDMNG_STATE_WORKING:
			LCDMNG_state_working();
			break;
		case LCDMNG_STATE_PROCESSING:
			LCDMNG_state_processing();
			break;
		case LCDMNG_STATE_WAIT_FOR_PROCESSING:
			LCDMNG_state_wait_for_processing();
			break;
		case LCDMNG_STATE_SETTING:
			LCDMNG_state_setting();
			break;
		case LCDMNG_STATE_SETTING_DATA:
			LCDMNG_state_setting_data();
			break;
		case LCDMNG_STATE_IDLE:
			LCDMNG_state_idle();
			break;
		default:
			break;
	}
	LCDMNG_printf();
	prev_state = state;
}

static void LCDMNG_state_init(){
	LCD_draw_bitmap(logo_screen);
	SCH_Add_Task(LCDMNG_timeout, INIT_SCREEN_DURATION, 0);
	state = LCDMNG_STATE_WAIT_FOR_INIT;
}

static void LCDMNG_state_wait_for_init(){
	if(timeout){
		state = LCDMNG_STATE_WELCOME;
	}
}

static void LCDMNG_state_welcome(){
	LCD_draw_bitmap(welcome_screen);
	timeout = false;
	SCH_Add_Task(LCDMNG_timeout, WELCOME_SCREEN_DURATION, 0);
	state = LCDMNG_STATE_WAIT_FOR_WELCOME;
}

static void LCDMNG_state_wait_for_welcome(){
	if(timeout){
		state = LCDMNG_STATE_WORKING;
	}
}

static void LCDMNG_state_working(){
	if(timeout){
		LCD_draw_bitmap(working_screen_temp);
		state = LCDMNG_STATE_IDLE;
		timeout = false;
		SCH_Add_Task(LCDMNG_timeout, WORKING_SCREEN_DURATION, 0);
	}
}

static void LCDMNG_state_processing(){
	LCD_draw_bitmap(processing_screen);
	state = LCDMNG_STATE_WAIT_FOR_PROCESSING;
	timeout = false;
	SCH_Add_Task(LCDMNG_timeout, WORKING_SCREEN_DURATION, 0);
}

static void LCDMNG_state_wait_for_processing(){
	if(timeout){
		state = LCDMNG_STATE_WORKING;
	}
}

static void LCDMNG_state_setting(){

}

static void LCDMNG_state_setting_data(){

}

static void LCDMNG_state_idle(){
	// Do nothing
	if(timeout){
		LCD_draw_bitmap(logo_screen);
		state = LCDMNG_STATE_WORKING;
		timeout = false;
		SCH_Add_Task(LCDMNG_timeout, IDLE_SCREEN_DURATION, 0);
	}
}

void LCDMNG_set_init_screen(){
	// Do nothing with argument
	if(state != LCDMNG_STATE_INIT && state != LCDMNG_STATE_WAIT_FOR_INIT){
		state = LCDMNG_STATE_INIT;
	}
}

void LCDMNG_set_welcome_screen(){
	// Do nothing with argument
	if(state != LCDMNG_STATE_WELCOME && state != LCDMNG_STATE_WAIT_FOR_WELCOME){
		state = LCDMNG_STATE_INIT;
	}
}

void LCDMNG_set_working_screen_without_draw(RTC_t * rtc, uint32_t amount){
	// Set Time
	uint8_t hour = rtc->hour;
	uint8_t minute = rtc->minute;
	uint8_t second = rtc->second;
	char time_buf[10];
	snprintf(time_buf, sizeof(time_buf), "%02d:%02d", hour, minute);
	LCDMNG_set_font(font15x31);
	LCDMNG_draw_string(working_screen_temp, WORKING_SCREEN_TIME_X_POSITION, WORKING_SCREEN_TIME_LINE_POSITION, time_buf);
	// Set Time
	uint8_t date = rtc->date;
	uint8_t month = rtc->month;
	uint16_t year = rtc->year;
	char date_buf[20];
	snprintf(date_buf, sizeof(date_buf), "%02d/%02d/%04d", date, month, year);
	LCDMNG_set_font(font5x7);
	LCDMNG_draw_string(working_screen_temp, WORKING_SCREEN_DATE_X_POSITION, WORKING_SCREEN_DATE_LINE_POSITION, date_buf);
	// Set card_price
	char amount_buf[10];
	snprintf(amount_buf, sizeof(amount_buf), "%d.000", amount / 1000);
	LCDMNG_set_font(font7x15);
	LCDMNG_draw_string(working_screen_temp, WORKING_SCREEN_AMOUNT_X_POSITION, WORKING_SCREEN_AMOUNT_LINE_POSITION, amount_buf);
}

void LCDMNG_set_working_screen(RTC_t * rtc, uint32_t amount){
	// Set Time
	uint8_t hour = rtc->hour;
	uint8_t minute = rtc->minute;
	uint8_t second = rtc->second;
	char time_buf[10];
	snprintf(time_buf, sizeof(time_buf), "%02d:%02d", hour, minute);
	LCDMNG_set_font(font15x31);
	LCDMNG_draw_string(working_screen_temp, WORKING_SCREEN_TIME_X_POSITION, WORKING_SCREEN_TIME_LINE_POSITION, time_buf);
	// Set Time
	uint8_t date = rtc->date;
	uint8_t month = rtc->month;
	uint16_t year = rtc->year;
	char date_buf[20];
	snprintf(date_buf, sizeof(date_buf), "%02d/%02d/%04d", date, month, year);
	LCDMNG_set_font(font5x7);
	LCDMNG_draw_string(working_screen_temp, WORKING_SCREEN_DATE_X_POSITION, WORKING_SCREEN_DATE_LINE_POSITION, date_buf);
	// Set card_price
	char amount_buf[10];
	snprintf(amount_buf, sizeof(amount_buf), "%d.000", amount / 1000);
	LCDMNG_set_font(font7x15);
	LCDMNG_draw_string(working_screen_temp, WORKING_SCREEN_AMOUNT_X_POSITION, WORKING_SCREEN_AMOUNT_LINE_POSITION, amount_buf);
	LCD_draw_bitmap(working_screen_temp);
}

void LCDMNG_set_processing_screen(){
	// Do nothing with argument
	if(state != LCDMNG_STATE_PROCESSING && state != LCDMNG_STATE_WAIT_FOR_PROCESSING && state != LCDMNG_STATE_SETTING){
		state = LCDMNG_STATE_PROCESSING;
	}
}

void LCDMNG_set_setting_screen(){
	// Update argument
	char str_buf[20];
	for (int field_id = LCDMNG_SETTING_FIELD_DATE_TIME; field_id <= LCDMNG_SETTING_FIELD_DELETE_SUM_OF_AMOUNT; ++field_id) {
		memset(str_buf, 0 , sizeof(str_buf));
		sniprintf(str_buf, sizeof(str_buf), "%d %s", field_id, setting_field_info[field_id].name);
		LCDMNG_set_font(font5x7);
		LCDMNG_draw_string(setting_screen, setting_field_info[field_id].x_position, setting_field_info[field_id].line_position, str_buf);
	}
	// Do nothing with argument
	LCD_draw_bitmap(setting_screen);
	state = LCDMNG_STATE_SETTING;
}

void LCDMNG_set_setting_data_screen(uint32_t field_id, void * data, size_t data_len){
	memset(setting_data_screen, 0, sizeof(setting_data_screen));
	char field_buf[20];
	size_t padlen = (22 - strlen(setting_field_info[field_id].name)) / 2;
	snprintf(field_buf, sizeof(field_buf), "%*s%s%*s", padlen, "", setting_field_info[field_id].name, padlen, "");
	LCDMNG_set_font(font5x7);
	LCDMNG_draw_string(setting_data_screen, 0,0, field_buf);

	uint8_t test;
	if(data){
		char data_buf[20];
		if(field_id == LCDMNG_SETTING_FIELD_DATE_TIME){
			RTC_t *rtc = (RTC_t *) data;
			snprintf(data_buf, sizeof(data_buf), "%02d:%02d %02d/%02d/%04d", rtc->hour,
																			rtc->minute,
																			rtc->date,
																			rtc->month,
																			rtc->year);

		}
		else if(field_id == LCDMNG_SETTING_FIELD_CARD_PRICE){
			uint32_t card_prices;
			card_prices = *(uint32_t*)data;
			snprintf(data_buf, sizeof(data_buf), "%d", card_prices);
		}
		else if(field_id == LCDMNG_SETTING_FIELD_PASSWORD){
			char * password = (char*) data;
			snprintf(data_buf, sizeof(data_buf), "%s", password);
		}
		else if(field_id == LCDMNG_SETTING_FIELD_TOTAL_CARD){
			uint32_t total_card;
			total_card = *(uint32_t*)data;
			snprintf(data_buf, sizeof(data_buf), "%d", total_card);
		}
		else if(field_id == LCDMNG_SETTING_FIELD_DELETE_TOTAL_CARD){
			snprintf(data_buf, sizeof(data_buf), "Deleted total card");
		}
		else if(field_id == LCDMNG_SETTING_FIELD_SUM_OF_AMOUNT){
			uint32_t sum_of_amount;
			sum_of_amount = *(uint32_t*)data;
			snprintf(data_buf, sizeof(data_buf), "%d", sum_of_amount);
		}
		else if(field_id == LCDMNG_SETTING_FIELD_DELETE_SUM_OF_AMOUNT){
			snprintf(data_buf, sizeof(data_buf), "Deleted sum of amount");
		}
		LCDMNG_set_font(font5x7);
		LCDMNG_draw_string(setting_data_screen, SETTING_SCREEN_DATA_X_POSITION, SETTING_SCREEN_DATA_LINE_POSITION, data_buf);
	}

	// Do nothing with argument
	LCD_draw_bitmap(setting_data_screen);
	state = LCDMNG_STATE_SETTING_DATA;
}

void LCDMNG_test(){
	LCD_draw_bitmap(welcome_screen);
}

static void LCDMNG_draw_string(uint8_t *buff, uint8_t x, uint8_t line, uint8_t *c) {
	while (c[0] != 0) {
		LCDMNG_draw_char(buff, x, line, c[0]);
		c++;
		x += font[2] + 1; // 6 pixels wide
		if (x + 6 >= LCDMNG_WIDTH) {
			x = 0;    // ran out of this line
			line++;
		}
		if (line >= (LCDMNG_HEIGHT / 8))
			return;        // ran out of space :(
	}
}

static void LCDMNG_set_font(uint8_t *fontPtr) {
	font = fontPtr;
}

static void LCDMNG_draw_char(uint8_t *buff, uint8_t x, uint8_t line, uint8_t c) {
	uint8_t xOffset = font[2];
	uint8_t yOffset = font[3] / 8 + 1;
	c -= font[4];
	c = c * yOffset;
	for (uint8_t i = 0; i < xOffset; i++) {
		for (uint8_t j = 0; j < yOffset; j++) {
			buff[x + ((line + j) * 128)] = font[6 + ((c + j) * xOffset) + i];
		}
		x++;
	}
}

static void LCDMNG_timeout(){
	timeout = true;
}

static void LCDMNG_timeout_for_idle(){
	timeout_for_idle = true;
}

static void LCDMNG_printf(){
	if(prev_state != state){
		utils_log_info(lcdmng_state_name[state]);
	}
}
